<script>
function activate(){
  const code = document.getElementById("code").value.trim();
  if(!code) return;

  fetch("https://deep2-0z0k.onrender.com/activate", {
    method: "POST",
    headers: {
      "x-activation-code": code
    }
  })
  .then(r => r.json())
  .then(d => {
    if(d.status === "activated"){
      document.getElementById("success").style.display = "block";
      document.getElementById("error").style.display = "none";
      localStorage.setItem("activated", "1");
      setTimeout(() => location.href = "app.html", 800);
    } else {
      document.getElementById("error").style.display = "block";
      document.getElementById("success").style.display = "none";
    }
  })
  .catch(() => {
    document.getElementById("error").style.display = "block";
  });
}
</script>